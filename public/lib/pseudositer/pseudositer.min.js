((function(){var a=Array.prototype.slice;(function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;f=["startUpdate","doneUpdate","startLoading","failedLoading","doneLoading","alwaysLoading","hideIndex","showIndex","selectLink","hideContent","showContent","showError","destroy"],c="pseudositer-content",L="pseudositer-stale",u="pseudositer-index",v="pseudositer-index-container",B="pseudositer-loading",e="pseudositer-error",x="pseudositer-link",G="pseudositer-link-selected",C=function(a){(typeof console!=="undefined"&&console!==null?console.log:void 0)!=null&&console.log(a);return},j=function(){var a;return a=document.location.pathname},i=function(){var a;return a=document.location.hash.substr(1)},o=function(a){var b,c,d,e;b=a.split("/"),d=["/"];for(c=1,e=b.length-1;1<=e?c<e:c>e;1<=e?c++:c--)d.push(b.slice(0,c+1||9e9).join("/")+"/");return d},p=function(a){return a.split("/").length-2},w=function(a){return this.logging&&C("isPathToFile( "+a+" )"),a.charAt(a.length-1)!=="/"?!0:!1},k=function(a){var b,c,d;return d=a.split("/"),b=d[d.length-1],c=b.split("."),c.length>1?c[c.length-1].toLowerCase():null},n=function(a){var b,c,d,e,f;b=a.attr("class").split(/\s+/);for(e=0,f=b.length;e<f;e++){c=b[e],d=c.match(new RegExp(""+u+"-(\\d)"));if(d!=null)return d[1]}throw"Could not find an index level in classes "+b},h=function(a){var d;return d=b("."+c),d.length===0&&(d=b("<div />").addClass(c).appendTo(a)),d},m=function(a){var c;return c=b("."+v),c.length===0&&(c=b("<div />").addClass(v).prependTo(a)),c},l=function(a){return u+"-"+a},g=function(a){return a.replace(/[^A-Za-z0-9]/g,"-")},N=function(a){var c;return c=b("."+x+'[href="#'+a+'"]'),c.parent().siblings().find("."+x).removeClass(G),c.addClass(G)},z=function(a){var c,d,e;return d=b("<div />").css({height:"0px",width:"0px"}).appendTo(b("body")),e=new b.Deferred,c=b("<a />").attr("href",a).append(b("<img />").attr("src",a).bind("load",function(){return e.resolve(c),d.remove()}).bind("error",function(){return d.remove(),e.reject("Could not load image at "+a)})),e.promise()},A=function(a){var c;return c=new b.Deferred,b.get(a).done(function(a){return c.resolve(b("<div />").append(b("<pre />").text(a)))}).fail(function(a){return c.reject(a.statusText)}),c.promise()},y=function(a){var c;return c=new b.Deferred,b.get(a).done(function(a){return c.resolve(b(a))}).fail(function(a){return c.reject(a.statusText)}),c.promise()},d=function(a){return window.location=a,(new b.Deferred).resolve()},M=function(a,c){var d,e;return e=l(a),d=b("<ul />").addClass(u+" "+e).hide(),c.each(function(){return d.append(b("<li />").append(this))}),d},D=function(a){var c,d;return c='a:not([href^="?"],[href^="/"],[href^="../"])',d=[],b(a).find(c).each(function(){return d.push(b(this).attr("href"))}),d},E=function(a){return b.parseJSON(a)},K=function(a,c){var d,e;this.logging&&C("showLoadingNotice( "+c+" )"),e=g(c),d=b("<div />").hide().text("Loading "+c+"...").addClass(""+B+" "+e).appendTo(this).fadeIn("fast");return},t=function(a,c){var d,e;this.logging&&C("hideLoadingNotice( "+c+" )"),c!=null?(e=g(c),d=b("."+B+"."+e)):d=b("."+B),d.fadeOut("fast",function(){return d.remove()});return},s=function(a,c,d){var e,f,g,h,i,j,k,l;this.logging&&C("hideIndex( "+c+", "+d+" )"),h=(new b.Deferred).resolve(),g=b("."+x+'[href="#'+d+'"]');if(g.length===0){j=o(d).reverse();for(k=0,l=j.length;k<l;k++){i=j[k],g=b("."+x+'[href="#'+i+'"]');if(g.length>0)break}}e=g.parents("li").siblings().find("."+u),f=g.siblings("."+u).find("."+u),b.merge(e,f).each(function(){var a,c;return a=b(this),c=new b.Deferred(function(b){return a.fadeOut("fast",function(){return b.resolve()})}),h=h.pipe(function(){return c})}),h.done(function(){return c.resolve()});return},J=function(a,c,d,e){var f,g,h;this.logging&&C("showIndex( "+c+", "+d+", "+e+" )"),h=d.split("/").length-2,h===0?(f=b("."+l(0)),f.length===0&&(f=M(h,e).appendTo(m(this)))):(g=b('a[href="#'+d+'"]'),f=g.siblings("."+u),f.length===0&&(f=M(h,e),g.after(f))),f.is(":visible")?c.resolve():f.fadeIn("fast",function(){return c.resolve()});return},F=function(a,b,c,d){b.resolve();return},q=function(a,b){var c;this.logging&&C("hideContent( "+b+" )"),c=h(this).children(),c.length===0?b.resolve():c.fadeOut("fast",function(){return c.detach(),b.resolve()});return},H=function(a,b,c){var d;this.logging&&C("showContent( "+b+", "+c+" )"),d=h(this),c.hide().appendTo(d).fadeIn("fast",function(){return b.resolve()});return},I=function(a,c){var d;this.logging&&C("showError( "+c+" )"),this.logging&&C(c),d=b("."+e),d.length===0&&(d=b("<div />").addClass(e).appendTo(h(this))),d.text(c.toString()).fadeIn("fast");return},r=function(a){var c;this.logging&&C("hideError( )"),c=b("."+e),c.fadeOut("fast",function(){return c.text("")});return},b.pseudositer=function(c,d,e){var g,h,l,m,n,p,q,r,s,t=this;return this.$el=b(c),this.$el.data("pseudositer",this),this.cache={},this.init=function(){var c,g,h,i,l,m,n,o;t.options=b.extend({},b.pseudositer.defaultOptions,e),t.map=b.extend({},b.pseudositer.defaultMap,t.options.map),t.readIndex=function(){switch(this.options.index){case"autoindex":return D;case"json":return E;default:throw this.options.index+" is not recognized index reader"}}.call(t),t.visiblePath=j(),t.logging=t.options.logging,t.updating=(new b.Deferred).resolve().promise(),d.charAt(d.length-1)||(d=""+d+"/"),d.charAt(0)==="/"?t.realPath=d:k(t.visiblePath)!=null?(h=t.visiblePath.split("/"),t.realPath=h.slice(0,h.length-1).join("/")+"/"+d):t.visiblePath.charAt(t.visiblePath.length-1)==="/"?t.realPath=t.visiblePath+d:t.realPath=t.visiblePath+"/"+d,b(window).bind("hashchange",s);for(i=0,m=f.length;i<m;i++){c=f[i],o=t.options[c];for(l=0,n=o.length;l<n;l++)g=o[l],t.$el.bind(""+c+".pseudositer",{handler:g},function(){var b,c;return b=1<=arguments.length?a.call(arguments,0):[],c=b[0],c.data.handler.apply(t.$el,b),!1})}return s(),t},this.setRecursion=function(a){t.logging&&C("setRecursion( "+a+" )");if(a!==!0&&a!==!1||t.options.recursion===a)throw"new value for recursion must be true or false";return t.options.recursion=a,s(),t},this.destroy=function(){return t.logging&&C("destroy( )"),b(window).unbind("hashchange",s),t.$el.empty(),t.$el.removeData("pseudositer"),document.location.hash="",r("destroy"),t.$el.unbind(".pseudositer"),t},r=function(){var b,c;return c=arguments[0],b=2<=arguments.length?a.call(arguments,1):[],t.logging&&C("trigger( "+c+", "+b+" )"),t.$el.triggerHandler(""+c+".pseudositer",b),t},h=function(a){return t.logging&&C("getAjaxPath( "+a+" )"),t.realPath+a.substr(1)},g=function(a){var b,c,d;return w(a)?(d=a.split("/"),c=d[d.length-1].split("."),b=k(a),b in t.map?c.slice(0,c.length-1).join("."):a):a},s=function(){var a,c;t.logging&&C("update( )"),a=i();if(a===""){document.location.hash="/";return}if(a.charAt(0)!=="/"){document.location.hash="/"+a;return}if(t.options.recursion===!0&&w(a)!==!0){p(a);return}return r("startUpdate",a,h(a)),c=(new b.Deferred).done(function(){return r("doneUpdate",a,h(a))}).fail(function(a){return r("showError",a)}),t.updating.always(function(){var d;return t.updating=c.promise(),t.cache[a]!=null?d=(new b.Deferred).resolve():d=l(a),setTimeout(function(){return c.reject("Load timeout after "+t.options.timeout+" ms")},t.options.timeout),d.fail(function(a){return c.reject(a)}).done(function(){var d,e;return e=q(a),d=new b.Deferred,r("hideContent",d),b.when(e,d).done(function(){var d,e,f;return w(a)?(f=new b.Deferred,r("selectLink",f,a,N(a)),d=t.cache[a],e=(new b.Deferred).done(function(){return c.resolve()}).fail(function(a){return c.reject(a)}),f.done(function(){return r("showContent",e,d)})):c.resolve()}).fail(function(a){return c.reject(a)})})}),t},l=function(a){var c,d,e,f,g,h,i;t.logging&&C("load( "+a+" )"),r("startLoading",a),d=[],w(a)&&d.push(m(a)),f=o(a),i=f.slice(0,f.length-1+1||9e9);for(g=0,h=i.length;g<h;g++)e=i[g],d.push(n(e));return c=b.when.apply(t,d).done(function(){return r("doneLoading",a)}).fail(function(b){return r("failedLoading",a)}).always(function(){return r("alwaysLoading",a)})},p=function(a){return t.logging&&C("redirectToFile( "+a+" )"),w(a)?document.location.hash=a:n(a).done(function(){var b;return b=t.cache[a],b.length===0?r("showError",""+a+" has no content"):p(b.first().attr("href").substr(1))}).fail(function(a){return r("showError",a)}),t},n=function(a){var c,d;return t.logging&&C("loadIndex( "+a+" )"),c=new b.Deferred,t.cache[a]!=null?c.resolve():(d=a+t.options.indexFileName,b.ajax({url:h(d),dataType:"text",dataFilter:t.readIndex}).done(function(d){var e;return e=b("<div />"),b.each(d,function(c,d){var f,h,i;return h=d.charAt(0)==="/"?d:a+d,h=t.options.decodeUri===!0?decodeURI(h):h,h="#"+h,d.charAt(d.length-1)==="/"?i=t.options.stripSlashes===!0?d.substr(0,d.length-1):d:i=t.options.showExtension===!0?d:g(d),i=decodeURI(i),f=b("<a />").attr("href",h).addClass(x).text(i).appendTo(e)}),t.cache[a]=e.children(),c.resolve()}).fail(function(b){return c.reject("Could not load index page for "+a+" at "+d)})),c.promise()},m=function(a){var c,d,e,f;return t.logging&&C("loadContent( "+a+" )"),c=k(a),e=new b.Deferred,d=t.map[c]!=null?t.map[c]:t.map[""],f=d(h(a)),f.done(function(b){return t.cache[a]=b,e.resolve()}).fail(function(a){return e.reject(a)}),e.promise()},q=function(a){var c,d,e;return t.logging&&C("showIndices( "+a+" )"),c=new b.Deferred,r("hideIndex",c,a),e=o(a),d=[c.promise()],b.each(e,function(a,c){var e,f,g,h;return e=t.cache[c],g=d[d.length-1],f=new b.Deferred,h=new b.Deferred,g.done(function(){return r("selectLink",h,c,N(c))}),h.done(function(){return r("showIndex",f,c,e)}),d.push(f.promise())}),d[d.length-1]},this.init()},b.pseudositer.defaultOptions={linkSelector:'a:not([href^="?"],[href^="/"],[href^="../"])',startUpdate:[r],doneUpdate:[],startLoading:[K],failedLoading:[],doneLoading:[],alwaysLoading:[t],hideIndex:[s],showIndex:[J],selectLink:[F],hideContent:[q],showContent:[H],showError:[I],destroy:[t,r],logging:!1,timeout:1e4,recursion:!1,showExtension:!1,decodeUri:!1,stripSlashes:!1,indexFileName:"",index:"autoindex"},b.pseudositer.defaultMap={png:z,gif:z,jpg:z,jpeg:z,txt:A,html:y,"":d},b.fn.pseudositer=function(a,c){return b.each(this,function(d,e){var f;f=b(e);if(!f.data("pseudositer"))return f.data("pseudositer",new b.pseudositer(e,a,c))})};return})(jQuery)})).call(this);